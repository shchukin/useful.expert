$(function(){function e(){a=i.offset().top+i.outerHeight(),l=o.offset().top-70,r.scrollTop()>=a&&r.scrollTop()<l&&1!==c?(n.css({position:"fixed",top:"0"}),c=1):r.scrollTop()<a&&0!==c?(n.css({position:"static",width:"",top:"",left:""}),c=0):r.scrollTop()>=l&&2!==c&&(n.css({position:"absolute",left:"0"}),c=2),1===c?n.css({width:s.width()+"px",left:i.offset().left+"px"}):2===c&&n.css({width:s.width()+"px",top:o.offset().top-i.offset().top-50+"px"})}function t(e){return'<li class="advices__item">'+e.name+",<br/>"+e.company+"</li>"}var s=$(".advices");if(s.length){var i=$(".advices__list"),n=$(".advices__become-client"),o=$(".request"),a=i.offset().top+i.height(),l=o.offset().top-70,r=$(window),c=0;r.on("scroll",e).trigger("scroll"),r.on("resize",e);for(var d,p,u=5,f=window.clientsAdvices.length,_=window.clientsAdvices.slice(0),h=0;u>h;h+=1)p=parseInt(Math.random()*(f-h),10),d=_[p],i.prepend($(t(d))),_.splice(p,1);var g=$("#scroll-to-feedback"),m=$("#scroll-to-request"),v=$("html, body"),x=$("#request-name");g.on("click",function(){v.animate({scrollTop:$("#feedback").offset().top+"px"},400)}),m.on("click",function(){v.animate({scrollTop:$("#request").offset().top-25+"px"},400),setTimeout(function(){x.focus()},400)})}}),$(function(){function e(e){$(".knowleges__tiles").each(function(e){s[e]=this.offsetHeight}),t.addClass("l-knowleges-contain--initialized")}if(!document.getElementById("knowleges-section"))return!1;var t=$("#knowleges-contain"),s=[];e(),t.on("click",".knowleges__tile--more",function(){var e=$(this),t=e.closest(".knowleges__tiles");t.css({maxHeight:s[e.data("index")]+"px"}),t.removeClass("knowleges__tiles--scoped")})}),$(function(){var e=$("#principle2-link"),t=$("#principle7"),s=$("html, body");e.on("click",function(){s.animate({scrollTop:t.offset().top-30+"px"},400)})}),$(function(){var e=($(window),$(".principle8__tab")),t=$(".principle8__screen"),s=$(".principle8__screens");return e.length?(setTimeout(function(){s.css({maxHeight:t.eq(0).height()+"px"}),s.width(),s.addClass("principle8__screens--initialized")},1e3),void e.on("click",function(){var i=$(this),n=i.data("anchor"),o=$("#"+n);e.removeClass("principle8__tab--active"),i.addClass("principle8__tab--active"),t.removeClass("principle8__screen--active"),o.addClass("principle8__screen--active"),s.css({maxHeight:o.height()+"px"})})):!1}),$(function(){function e(){var e=n.scrollTop(),t=n.height();i.each(function(s,i){var n=$(i),a=n.find(".principles__card"),l=n.offset().top,r=n.data("state");e+t>l+o&&1!==r&&(r=1,a.addClass("principles__card--placed"),a.width()),n.data("state",r)})}function t(){var e=n.scrollTop(),t=l.offset(),s=t.top,i=t.left,o=l.width(),d=n.height(),p=n.width(),u=r.offset().top,f=e+d,_=s+45+77,h=u-110,$=h+100;f>$&&3!==c?(a.css({display:"none"}),c=3):f>h&&$>=f&&2!==c?(a.css({display:""}),c=2):f>_&&h>=f&&1!==c?(a.css({position:"fixed",bottom:"15px",top:"auto",display:"",right:""}),c=1):_>=f&&0!==c&&(a.css({position:"",bottom:"",top:"",display:"",right:""}),c=0),1!==c&&2!==c||a.css({right:p-i-o+15+"px"}),2===c&&a.css({bottom:-85+$-f+"px"})}var s=$("html, body"),i=$(".principles__item");if(i.length){var n=$(window),o=100;n.on("resize",e),n.on("scroll",e);var a=$(".principles__support");a.on("click",function(){s.animate({scrollTop:$("#support-principle").offset().top-25+"px"},600)});var a=$(".principles__support"),l=$(".principles"),r=$("#support-principle"),c=0;n.on("scroll",t).trigger("scroll"),n.on("resize",t)}}),$(function(){function e(){return p.val().length?p.val().match(/^[^@]+@[^@]{3,}\.[^@]{2,}$/)||(p.focus(),c||(d.addClass("request__dl--error"),u.text("Проверьте адрес электронной почты"),c=!0)):(p.focus(),c||(d.addClass("request__dl--error"),u.text("Введите почту, чтобы мы могли ответить"),c=!0)),l.val().length||(l.focus(),o||(a.addClass("request__dl--error"),r.text("Введите имя"),o=!0)),f||c||o?(g.addClass("request__sbm--fail"),setTimeout(function(){g.removeClass("request__sbm--fail")},700)):(h.addClass("request__dl--sending"),l.prop("readOnly",!0),p.prop("readOnly",!0),_.prop("readOnly",!0),$.ajax({url:"https://docs.google.com/forms/d/1j3B_tANYA9RjKCnUheG0XQ0AmsBGCj21yLYxjyYOdhs/formResponse",method:"POST",data:{entry_1365817451:l.val(),entry_1345089574:p.val(),"entry.144558538":_.val()},dataType:"xml"}).done(function(e){h.addClass("request__dl--done"),h.removeClass("request__dl--sending"),$("#request-form")[0].reset()}).fail(function(e,t){h.addClass("request__dl--done"),h.removeClass("request__dl--sending"),$("#request-form")[0].reset()})),!1}var t,s=$(".request__inp, .request__text"),i=$(".request__text"),n=$("#request-form"),o=!1,a=$("#request-name-holder"),l=$("#request-name"),r=$("#request-name-label"),c=!1,d=$("#request-email-holder"),p=$("#request-email"),u=$("#request-email-label"),f=!1,_=($("#request-desc-holder"),$("#request-desc")),h=($("#request-desc-label"),$("#request-sbm-holder")),g=$("#request_sbm");s.on("change input keypress",function(){var e=$(this);this.value.length?e.addClass("request__inp--not-empty"):e.removeClass("request__inp--not-empty")}).trigger("change"),i.parent().append('<div class="request__text-ghost"><span class="request__text-ghost-text"></span></div>'),t=$(".request__text-ghost"),$ghostText=$(".request__text-ghost-text"),i.on("change input keypress",function(){var e=this.value;"\n"!=e.substr(this.value.length-1)&&"\r"!=e.substr(this.value.length-1)||(e+="<br />"),$ghostText.html(e),i.css({height:t.outerHeight()+"px"})}).trigger("change"),l.on("input change keypress",function(){o&&(a.removeClass("request__dl--error"),r.text(r.data("label")),o=!1)}),p.on("input change keypress",function(){c&&(d.removeClass("request__dl--error"),u.text(u.data("label")),c=!1)}),n.on("submit",e)}),$(function(){function e(){l=a.height(),r=n.width(),c=n.height(),o=(l+c)/(_-r),h=n.offset().top,i()}function t(){n.addClass("scrollpane--initiated"),_=0,u.each(function(e,t){_+=$(t).width()}),e(),setTimeout(function(){e()},50)}function s(){f||t()}function i(){m&&(.8>o&&(o=.8),g=(a.scrollTop()+l-h)/-o+120,d.css({left:g+"px"}))}var n=$(".scrollpane");if(n.length){n.scroller({noscrollbar:!0,leftIfWide:!0});var o,a=$(window),l=a.height(),r=n.width(),c=n.height(),d=$(".ab_draggable"),p=d.find("img"),u=d.find("*"),f=p.length,_=0,h=n.offset().top,g=0,m=!0;p.each(function(e,t){t.complete&&(f--,s()),t.onload=function(){f--,s()},t.error=function(){f--,s()}}),s(),a.on("resize",e).trigger("resize"),d.on("click",function(){m=!1}),n.mousewheel(function(e,t,s,i){s&&!isNaN(s)&&(m=!1)}),a.on("scroll",i)}}),$(function(){function e(){var e;return d==a?(d++,"Если вы прочитали до этого места, скажите, подарим вам скидку"):(r.splice(0,r.length),$.each(window.advices,function(e,t){~l.indexOf(t)||r.push(t)}),e=parseInt(Math.random()*(r.length-1)),l.push(r[e]),l.length>c&&l.shift(),d++,r[e])}var t=$(".socials");if(t.length){var s=$(window),i=$(".socials__desc-update-contain"),n=$(".socials__desc-text"),o=$(".socials__desc"),a=window.advices.length,l=[window.advices[0]],r=[],c=parseInt(.5*a,10),d=0;c>3&&(c=3),s.on("resize",function(){/*i.css({transform:"translateX("+(o.position().left+n.width())+"px)"})*/}).trigger("resize"),setTimeout(function(){s.trigger("resize")},100),t.on("click",".socials__desc-update",function(){var t,s,i=$(this),a=$('<span class="socials__desc-update socials__desc-update--updating" tabindex="0"></span>');$updateBtnContain=i.parent(),n.css({width:n.outerWidth()+"px"}),n.addClass("socials__desc-text--hidden"),t=$('<span class="socials__desc-text socials__desc-text--replace">'),t.html(e()),o.prepend(t),s=(t.width()-n.width())/2,n.css({left:s+"px"}),/*$updateBtnContain.css({transform:"translateX("+(o.position().left+t.width())+"px)"}),*/$updateBtnContain.addClass("socials__desc-update-contain--updating"),$updateBtnContain.append(a),i.remove(),i.width(),a.addClass("socials__desc-update--updated"),setTimeout(function(){t.removeClass("socials__desc-text--replace"),n.remove(),n=t,a.addClass("socials__desc-update--no-animation"),a.removeClass("socials__desc-update--updating"),a.removeClass("socials__desc-update--updated"),$updateBtnContain.removeClass("socials__desc-update-contain--updating"),a.width(),a.removeClass("socials__desc-update--no-animation")},500)})}}),$(function(){});
$(".show-text").click(function(){$(this).addClass("bg")});